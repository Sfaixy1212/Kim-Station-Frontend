import{r as t,j as e,z as l}from"./vendor.js";import{p as K}from"./index.js";import{A as ee}from"./Topbar.js";function re(){const[r,C]=t.useState("dealer"),[n,E]=t.useState(""),[i,w]=t.useState(""),[o,S]=t.useState(""),[x,k]=t.useState(""),[p,R]=t.useState(""),[g,I]=t.useState(""),[b,T]=t.useState(""),[h,P]=t.useState(""),[v,D]=t.useState(""),[j,O]=t.useState(""),[Q,z]=t.useState(""),[y,G]=t.useState(""),[q,L]=t.useState(""),[M,U]=t.useState(""),[F,V]=t.useState(""),[N,_]=t.useState("ARMANDO"),[Y,B]=t.useState(""),[d,f]=t.useState(""),[c,A]=t.useState(""),[m,H]=t.useState("AGENTE"),W=["ARMANDO","GIACOMO","LUIGI","RAFFAELE","GABRIELE"],J=()=>{E(""),w(""),S(""),I(""),T(""),P(""),D(""),O(""),z(""),G(""),L(""),U(""),V(""),_("ARMANDO"),B(""),f(""),A(""),H("AGENTE"),k(""),R("")},X=async a=>{a.preventDefault();try{if(r==="dealer"){if(!n||!g||!b||!h||!v||!j||!o||!i||!y){l.error("Compila tutti i campi obbligatori del Dealer.");return}const s=(x||i||"").trim(),u=(p||y||"").trim();if(!s||!u){l.error("Email e Password Identity sono obbligatorie (usa Password Temporanea se vuoi).");return}const $=await K("/admin/users",{email:s,password:u,role:"DEALER",ragioneSociale:n,cognome:d,nome:c,indirizzo:g,cap:b,citta:h,provincia:v,piva:j,recapitoCell:o,tipologia:1,agente:N,idGruppo:2,comsy1:q,comsy2:M,agenteVal:F});l.success("Dealer creato con successo"),J()}else{if(!Y||!n||!d||!c||!o||!i||!m){l.error("Compila tutti i campi obbligatori dell'Agente.");return}const s=(x||i||"").trim(),u=p||"Tmp-"+Math.random().toString(36).slice(2,8)+"Aa!",ae=await K("/admin/users",{email:s,password:u,role:m==="AGENTE"?"AGENTE":"DEALER",ragioneSociale:n,indirizzo:"",cap:"",citta:"",provincia:"",piva:"",recapitoCell:o,tipologia:1,agente:N,idGruppo:2,cognome:d,nome:c,tipologiaAgente:2,ruoloAgente:m});l.success("Agente creato con successo"),J()}}catch(s){console.error(s),l.error(s.message||"Errore durante la creazione")}};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{}),e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-6",children:e.jsxs("div",{className:"max-w-3xl mx-auto bg-white dark:bg-gray-800 shadow rounded-lg p-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-4",children:"Crea Utente Station"}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"Accesso riservato Admin. Seleziona il tipo di utente e compila i campi obbligatori."}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo Utente"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"type",value:"dealer",checked:r==="dealer",onChange:()=>C("dealer")}),e.jsx("span",{children:"Dealer"})]}),e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"radio",name:"type",value:"agente",checked:r==="agente",onChange:()=>C("agente")}),e.jsx("span",{children:"Agente"})]})]})]}),e.jsxs("form",{onSubmit:X,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ragione Sociale"}),e.jsx("input",{value:n,onChange:a=>E(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cognome"}),e.jsx("input",{value:d,onChange:a=>f(a.target.value),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{value:c,onChange:a=>A(a.target.value),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:i,onChange:a=>w(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Identity (accesso)"}),e.jsx("input",{type:"email",value:x,onChange:a=>k(a.target.value),placeholder:"Lascia vuoto per usare l'email sopra",className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Identity"}),e.jsx("input",{type:"text",value:p,onChange:a=>R(a.target.value),placeholder:"Lascia vuoto per generare (Agente) o usa TmpPasswd (Dealer)",className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cellulare"}),e.jsx("input",{value:o,onChange:a=>S(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]})]}),r==="dealer"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Indirizzo"}),e.jsx("input",{value:g,onChange:a=>I(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CAP"}),e.jsx("input",{value:b,onChange:a=>T(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CittÃ "}),e.jsx("input",{value:h,onChange:a=>P(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provincia (2 lettere)"}),e.jsx("input",{value:v,onChange:a=>D(a.target.value),maxLength:2,className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"P. IVA"}),e.jsx("input",{value:j,onChange:a=>O(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Riferimento (opzionale)"}),e.jsx("input",{value:Q,onChange:a=>z(a.target.value),className:"w-full border rounded px-3 py-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Temporanea"}),e.jsx("input",{value:y,onChange:a=>G(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"COMSY1"}),e.jsx("input",{value:q,onChange:a=>L(a.target.value),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"COMSY2"}),e.jsx("input",{value:M,onChange:a=>U(a.target.value),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"AGENTE (valore business)"}),e.jsx("input",{value:F,onChange:a=>V(a.target.value),className:"w-full border rounded px-3 py-2"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NOME_AGENTE"}),e.jsx("select",{value:N,onChange:a=>_(a.target.value),className:"w-full border rounded px-3 py-2",children:W.map(a=>e.jsx("option",{value:a,children:a},a))})]})]})]}),r==="agente"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ID Dealer"}),e.jsx("input",{type:"number",value:Y,onChange:a=>B(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cognome"}),e.jsx("input",{value:d,onChange:a=>f(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome"}),e.jsx("input",{value:c,onChange:a=>A(a.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ruolo"}),e.jsxs("select",{value:m,onChange:a=>H(a.target.value),className:"w-full border rounded px-3 py-2",children:[e.jsx("option",{value:"AGENTE",children:"AGENTE"}),e.jsx("option",{value:"OPERATOR",children:"OPERATOR"}),e.jsx("option",{value:"OPERATOR_DEALER",children:"OPERATOR_DEALER"})]})]})]})}),e.jsx("div",{className:"pt-2",children:e.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded shadow",children:"Crea Utente"})})]})]})})]})}export{re as default};
