import{j as e,r as s,z as pe}from"./vendor.js";import{S as ue}from"./Topbar2.js";import{u as _,g as R,a as Z,p as ee}from"./index.js";import{C as $}from"./Card.js";function n({label:N,children:h,className:d=""}){return e.jsxs("div",{className:`flex flex-col gap-1 ${d}`,children:[e.jsx("label",{className:"text-xs text-gray-500",children:N}),h]})}function L({title:N,children:h,className:d="",columns:x=3}){const m=["grid-cols-1"];x>=2&&m.push("sm:grid-cols-2"),x>=3&&m.push("lg:grid-cols-3"),x>=4&&m.push("xl:grid-cols-4"),x>=5&&m.push("2xl:grid-cols-5"),x>=6&&m.push("3xl:grid-cols-6");const p=m.join(" ");return e.jsxs("div",{className:`border border-gray-200 rounded-lg bg-white/70 p-3 flex flex-col gap-3 ${d}`,children:[e.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:N}),e.jsx("div",{className:`grid ${p} gap-3`,children:h})]})}function he(){const{user:N}=_(),h=(N?.role||"").toString().trim().toLowerCase(),d=h==="supermaster"||h==="admin",x=new Date,m=x.getMonth()+1,p=x.getFullYear(),U=`${p}-${String(m).padStart(2,"0")}-01`,b=new Date(p,m,0),M=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`,[g,j]=s.useState(m),[i,C]=s.useState(p),[f,y]=s.useState(U),[S,F]=s.useState(M),[w,v]=s.useState("SKY"),[o,T]=s.useState(null),[E,P]=s.useState(!1),[D,a]=s.useState(""),[l,u]=s.useState([]);async function A(){try{const r=await R("/supermaster/piani-incentivi");u(Array.isArray(r)?r:[])}catch{}}if(s.useEffect(()=>{d&&A()},[d]),s.useEffect(()=>{const r=`${i}-${String(g).padStart(2,"0")}-01`,c=new Date(i,g,0),k=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`;y(r),F(k)},[g,i]),!d)return null;async function O(r){r?.preventDefault?.(),a("");try{if(!o){a("Seleziona un file");return}P(!0);const c=new FormData;c.append("file",o),c.append("mese",String(g)),c.append("anno",String(i)),c.append("validita_dal",f||""),c.append("validita_al",S||""),c.append("operatore",w||"GENERIC"),await Z("/supermaster/piani-incentivi",c),T(null),await A(),alert("Piano inserito")}catch(c){a(c?.message||"Errore inserimento")}finally{P(!1)}}return e.jsxs("div",{className:"mt-4 border-t border-gray-200 pt-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:"Upload (solo SuperMaster)"}),e.jsxs("form",{onSubmit:O,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx(n,{label:"Operatore",children:e.jsx("input",{className:"border rounded-md px-2 py-1 text-sm",value:w,onChange:r=>v(r.target.value),placeholder:"SKY / FASTWEB / ILIAD…"})}),e.jsx(n,{label:"Mese",children:e.jsx("select",{className:"border rounded-md px-2 py-1 text-sm",value:g,onChange:r=>j(Number(r.target.value)),children:Array.from({length:12},(r,c)=>c+1).map(r=>e.jsx("option",{value:r,children:String(r).padStart(2,"0")},r))})}),e.jsx(n,{label:"Anno",children:e.jsx("input",{type:"number",className:"border rounded-md px-2 py-1 text-sm",value:i,onChange:r=>C(Number(r.target.value))})}),e.jsx(n,{label:"Validità dal",children:e.jsx("input",{type:"date",className:"border rounded-md px-2 py-1 text-sm",value:f,onChange:r=>y(r.target.value)})}),e.jsx(n,{label:"Validità al",children:e.jsx("input",{type:"date",className:"border rounded-md px-2 py-1 text-sm",value:S,onChange:r=>F(r.target.value)})}),e.jsx(n,{label:"File (PDF)",children:e.jsx("input",{type:"file",accept:".pdf",className:"text-sm",onChange:r=>T(r.target.files?.[0]||null)})}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx("button",{type:"submit",disabled:E,className:"px-3 py-2 bg-emerald-600 text-white rounded-md text-sm hover:bg-emerald-700 disabled:opacity-60",children:E?"Inserisco…":"Inserisci"}),D&&e.jsx("div",{className:"text-xs text-red-600",children:D})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Ultimi inserimenti"}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"min-w-full text-xs",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-2 py-1",children:"Periodo"}),e.jsx("th",{className:"text-left px-2 py-1",children:"Operatore"}),e.jsx("th",{className:"text-left px-2 py-1",children:"Nome file"}),e.jsx("th",{className:"text-left px-2 py-1",children:"Validità"}),e.jsx("th",{className:"text-left px-2 py-1",children:"Link"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:(l||[]).slice(0,10).map((r,c)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:String(r.periodo_label||`${String(r.mese).padStart(2,"0")}/${r.anno}`)}),e.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:r.operatore}),e.jsx("td",{className:"px-2 py-1",children:r.nome_file}),e.jsxs("td",{className:"px-2 py-1 whitespace-nowrap",children:[r.validita_dal," → ",r.validita_al||"-"]}),e.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:r.url_s3?e.jsx("a",{className:"text-blue-600 underline",href:r.url_s3,target:"_blank",rel:"noreferrer",children:"Apri"}):"-"})]},c))})]})})]})]})}function ge(){const{user:N}=_(),h=(N?.role||"").toString().trim().toLowerCase(),d=h==="supermaster"||h==="admin",[x,m]=s.useState(!0),[p,U]=s.useState([]),[b,M]=s.useState(!1),[g,j]=s.useState(""),[i,C]=s.useState({dealerId:"",dealerName:"",dealerQuery:"",sendToAllDealers:!0,titolo:"",messaggio:"",validFrom:"",validTo:"",active:!0,attachmentUrl:"",attachmentName:"",attachmentKey:""}),[f,y]=s.useState([]),[S,F]=s.useState(!1),w=s.useMemo(()=>{const a=new URLSearchParams;return x&&a.set("active","true"),`?${a.toString()}`},[x]);async function v(){try{M(!0),j("");const a=await R(`/supermaster/news${w}`);U(Array.isArray(a)?a:[])}catch(a){j(a?.message||"Errore caricamento news")}finally{M(!1)}}s.useEffect(()=>{v()},[w]),s.useEffect(()=>{let a=!1;const l=(i.dealerQuery||"").trim();if(!d)return;if(!l){y([]);return}const u=setTimeout(async()=>{try{const A=await R(`/supermaster/dealers/search?q=${encodeURIComponent(l)}`);a||y(Array.isArray(A)?A:[])}catch{a||y([])}},200);return()=>{a=!0,clearTimeout(u)}},[i.dealerQuery,d]);function o(a,l){C(u=>({...u,[a]:l}))}async function T(a){if(!a)return;const l=new FormData;l.append("file",a);const u=await Z("/supermaster/news/upload",l);o("attachmentUrl",u.url||""),o("attachmentName",u.originalName||a.name),o("attachmentKey",u.key||"")}async function E(a){a?.preventDefault?.();try{F(!0),j("");const l={...i,scope:"dealer"};l.sendToAllDealers?l.dealerId=null:l.dealerId=l.dealerId?Number(l.dealerId):null,l.active=!!l.active,await ee("/supermaster/news",l),C(u=>({...u,dealerId:"",dealerName:"",dealerQuery:"",sendToAllDealers:!0,titolo:"",messaggio:"",validFrom:"",validTo:"",attachmentUrl:"",attachmentName:"",attachmentKey:""})),await v()}catch(l){j(l?.message||"Errore creazione news")}finally{F(!1)}}async function P(a){try{await fetch(`/api/supermaster/news/${a.ID}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({active:!a.Active})}).then(l=>{if(!l.ok)throw new Error("HTTP "+l.status);return l.json()}),await v()}catch(l){j(l?.message||"Errore aggiornamento stato")}}async function D(a){if(confirm("Eliminare questa news?"))try{await fetch(`/api/supermaster/news/${a.ID}`,{method:"DELETE"}).then(l=>{if(!l.ok)throw new Error("HTTP "+l.status)}),await v()}catch(l){j(l?.message||"Errore eliminazione")}}return e.jsxs($,{title:"News",subtitle:"Gestione comunicazioni a Dealer e Agenti",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 mb-4",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:x,onChange:a=>m(a.target.checked)})," Solo attive"]}),e.jsx("button",{onClick:v,className:"ml-auto px-3 py-1.5 bg-white border border-gray-300 rounded-md text-sm hover:bg-gray-50",children:"Aggiorna"})]}),d&&e.jsxs("form",{onSubmit:E,className:"bg-gray-50 rounded-lg p-3 border border-gray-200 mb-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs(n,{label:"Dealer (Ragione Sociale)",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{value:i.dealerQuery,onChange:a=>o("dealerQuery",a.target.value),className:"border rounded-md px-2 py-1 text-sm w-full",placeholder:"Digita per cercare…"}),f.length>0&&e.jsx("div",{className:"absolute left-0 right-0 mt-1 border border-gray-200 rounded-md bg-white max-h-48 overflow-auto z-20",children:f.map(a=>e.jsxs("button",{type:"button",onClick:()=>{o("dealerId",String(a.DealerID)),o("dealerName",a.RagioneSociale),o("dealerQuery",a.RagioneSociale),y([])},className:"block w-full text-left px-2 py-1 hover:bg-gray-50 text-sm",children:[a.RagioneSociale," ",e.jsxs("span",{className:"text-[11px] text-gray-400",children:["(ID ",a.DealerID,")"]})]},a.DealerID))}),i.dealerName&&i.dealerId&&e.jsxs("div",{className:"text-[11px] text-gray-500 mt-1",children:["Selezionato: ",i.dealerName," (ID ",i.dealerId,")"]})]}),e.jsxs("label",{className:"inline-flex items-center gap-2 text-xs text-gray-700 mt-2",children:[e.jsx("input",{type:"checkbox",checked:i.sendToAllDealers,onChange:a=>o("sendToAllDealers",a.target.checked)})," Invia a tutti i Dealer"]})]}),e.jsx(n,{label:"Titolo",children:e.jsx("input",{value:i.titolo,onChange:a=>o("titolo",a.target.value),className:"border rounded-md px-2 py-1 text-sm",required:!0})}),e.jsx(n,{label:"Validità dal",children:e.jsx("input",{type:"date",value:i.validFrom,onChange:a=>o("validFrom",a.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Validità al",children:e.jsx("input",{type:"date",value:i.validTo,onChange:a=>o("validTo",a.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Allegato (pdf, jpg, png)",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:a=>T(a.target.files?.[0]),className:"text-sm"}),i.attachmentUrl&&e.jsx("a",{href:i.attachmentUrl,target:"_blank",rel:"noreferrer",className:"text-blue-600 text-sm underline",children:"Vedi allegato"})]})}),e.jsx("div",{className:"flex items-center gap-2 mt-6",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:i.active,onChange:a=>o("active",a.target.checked)})," Attiva"]})})]}),e.jsx(n,{label:"Messaggio",children:e.jsx("textarea",{value:i.messaggio,onChange:a=>o("messaggio",a.target.value),className:"border rounded-md px-2 py-1 text-sm w-full min-h-[80px]",required:!0})}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{disabled:S,className:"px-3 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 disabled:opacity-60",children:S?"Salvataggio…":"Crea News"}),g&&e.jsx("span",{className:"text-sm text-red-600",children:g})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"text-left text-gray-500",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 pr-3",children:"Titolo"}),e.jsx("th",{className:"py-2 pr-3",children:"Scope"}),e.jsx("th",{className:"py-2 pr-3",children:"Dealer/Agente"}),e.jsx("th",{className:"py-2 pr-3",children:"Validità"}),e.jsx("th",{className:"py-2 pr-3",children:"Allegato"}),e.jsx("th",{className:"py-2 pr-3",children:"Attiva"}),e.jsx("th",{className:"py-2 pr-3",children:"Azioni"})]})}),e.jsx("tbody",{children:b?e.jsx("tr",{children:e.jsx("td",{className:"py-3 text-gray-500",colSpan:7,children:"Caricamento…"})}):p.length===0?e.jsx("tr",{children:e.jsx("td",{className:"py-3 text-gray-500",colSpan:7,children:"Nessuna news"})}):p.map(a=>e.jsxs("tr",{className:"border-t border-gray-100",children:[e.jsxs("td",{className:"py-2 pr-3",children:[e.jsx("div",{className:"font-medium text-gray-800",children:a.Titolo}),e.jsx("div",{className:"text-xs text-gray-500 line-clamp-1",children:a.Messaggio})]}),e.jsx("td",{className:"py-2 pr-3",children:String(a.Scope).toUpperCase()}),e.jsx("td",{className:"py-2 pr-3",children:a.Scope==="dealer"?a.DealerID??"—":a.Agente??"—"}),e.jsxs("td",{className:"py-2 pr-3",children:[a.ValidFrom||"—"," ",a.ValidTo?`→ ${a.ValidTo}`:""]}),e.jsx("td",{className:"py-2 pr-3",children:a.AttachmentUrl?e.jsx("a",{className:"text-blue-600 underline",href:a.AttachmentUrl,target:"_blank",rel:"noreferrer",children:"Apri"}):"—"}),e.jsx("td",{className:"py-2 pr-3",children:a.Active?"Sì":"No"}),e.jsx("td",{className:"py-2 pr-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>P(a),className:"px-2 py-1 border rounded text-xs hover:bg-gray-50",children:a.Active?"Disattiva":"Attiva"}),e.jsx("button",{onClick:()=>D(a),className:"px-2 py-1 border border-red-200 text-red-600 rounded text-xs hover:bg-red-50",children:"Elimina"})]})})]},a.ID))})]})})]})}function fe(){return e.jsxs(e.Fragment,{children:[e.jsx(ue,{}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 space-y-6",children:[e.jsx($,{title:"Piani Incentivi",subtitle:"Inserisce i Piani Incentivi per Dealers e Agenti",children:e.jsx(he,{})}),e.jsx(ge,{}),e.jsx(ye,{})]})]})}function ye(){const{user:N}=_(),h=(N?.role||"").toString().trim().toLowerCase(),d=h==="supermaster"||h==="admin",x=["GABRIELE","GIACOMO","LUIGI","RAFFAELE"],m=new Date,[p,U]=s.useState(m.getFullYear()),[b,M]=s.useState(m.getMonth()+1),[g,j]=s.useState([]),[i,C]=s.useState(!1),[f,y]=s.useState(""),[S,F]=s.useState(x[0]),[w,v]=s.useState(0),[o,T]=s.useState(0),[E,P]=s.useState(0),[D,a]=s.useState(0),[l,u]=s.useState(0),[A,O]=s.useState(0),[r,c]=s.useState(0),[k,te]=s.useState(0),[V,ae]=s.useState(0),[G,se]=s.useState(0),[q,re]=s.useState(0),[Q,le]=s.useState(0),[Y,ne]=s.useState(0),[W,ie]=s.useState(0),[K,oe]=s.useState(0),[B,ce]=s.useState(0),[H,de]=s.useState(""),[J,X]=s.useState(!1);async function z(){try{C(!0),y("");const t=new URLSearchParams;p&&t.set("anno",String(p)),b&&t.set("mese",String(b));const I=await R(`/supermaster/obiettivi-agenti?${t.toString()}`);j(Array.isArray(I)?I:[])}catch(t){y(t?.message||"Errore caricamento obiettivi"),j([])}finally{C(!1)}}s.useEffect(()=>{d&&z()},[p,b,d]);async function xe(){try{X(!0),y("");const t={Agente:String(S||"").toUpperCase(),Anno:Number(p),Mese:Number(b),Note:H||null,FissoTotale:Number(w)||0,MobileTotale:Number(o)||0,EnergyTotale:Number(E)||0,FissoStart:Number(D)||0,FissoPro:Number(l)||0,FissoUltra:Number(A)||0,MobileStart:Number(r)||0,MobilePro:Number(k)||0,MobileUltra:Number(V)||0,MobilePercentRA:Number(G)||0,MobileConvergenze:Number(q)||0,EnergyCore:Number(Q)||0,EnergyFlex:Number(Y)||0,EnergyFix:Number(W)||0,EnergyEni:Number(K)||0,EnergyPercentFastweb:Number(B)||0};await ee("/supermaster/obiettivi-agenti",t),pe.success("Obiettivo aggiornato con successo"),await z()}catch(t){y(t?.message||"Errore salvataggio")}finally{X(!1)}}if(!d)return e.jsx($,{title:"Obiettivi Agenti",subtitle:"Accesso riservato al SuperMaster",children:e.jsx("div",{className:"text-sm text-gray-600",children:"Contatta l'amministratore per impostare i tuoi obiettivi."})});const me=["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"];return e.jsxs($,{title:"Obiettivi Agenti",subtitle:"Imposta i target mensili per Fisso, Mobile (RA) ed Energy per singolo Agente",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Mese"}),e.jsx("select",{value:b,onChange:t=>M(Number(t.target.value)),className:"border-gray-300 rounded-md text-sm",children:Array.from({length:12},(t,I)=>I+1).map(t=>e.jsxs("option",{value:t,children:[me[t-1]," (",String(t).padStart(2,"0"),")"]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Anno"}),e.jsx("input",{type:"number",value:p,onChange:t=>U(Number(t.target.value)),className:"border-gray-300 rounded-md text-sm w-24"})]}),e.jsx("button",{onClick:z,className:"ml-auto px-3 py-1.5 bg-white border border-gray-300 rounded-md text-sm hover:bg-gray-50",children:"Aggiorna"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200 mb-3 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-3 items-end",children:[e.jsx(n,{label:"Agente",className:"lg:col-span-2",children:e.jsx("select",{value:S,onChange:t=>F(t.target.value),className:"border-gray-300 rounded-md text-sm",children:x.map(t=>e.jsx("option",{value:t,children:t},t))})}),e.jsx(n,{label:"Note",className:"lg:col-span-3",children:e.jsx("input",{value:H,onChange:t=>de(t.target.value),className:"border rounded-md px-2 py-1 text-sm",placeholder:"Opzionale"})}),e.jsx("div",{className:"lg:col-span-1 flex items-end",children:e.jsx("button",{onClick:xe,disabled:J,className:"w-full px-3 py-2 bg-emerald-600 text-white rounded-md text-sm hover:bg-emerald-700 disabled:opacity-60",children:J?"Salvo…":"Aggiorna Obiettivi"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3",children:[e.jsxs(L,{title:"Fissi",columns:4,children:[e.jsx(n,{label:"Totali",children:e.jsx("input",{type:"number",min:"0",value:w,onChange:t=>v(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Start",children:e.jsx("input",{type:"number",min:"0",value:D,onChange:t=>a(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Pro",children:e.jsx("input",{type:"number",min:"0",value:l,onChange:t=>u(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Ultra",children:e.jsx("input",{type:"number",min:"0",value:A,onChange:t=>O(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})})]}),e.jsxs(L,{title:"Mobili",columns:6,children:[e.jsx(n,{label:"Totali",children:e.jsx("input",{type:"number",min:"0",value:o,onChange:t=>T(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Start",children:e.jsx("input",{type:"number",min:"0",value:r,onChange:t=>c(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Pro",children:e.jsx("input",{type:"number",min:"0",value:k,onChange:t=>te(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Ultra",children:e.jsx("input",{type:"number",min:"0",value:V,onChange:t=>ae(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"% RA richiesta",children:e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:G,onChange:t=>se(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Convergenze",children:e.jsx("input",{type:"number",min:"0",value:q,onChange:t=>re(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})})]}),e.jsxs(L,{title:"Energy",columns:6,children:[e.jsx(n,{label:"Totali",children:e.jsx("input",{type:"number",min:"0",value:E,onChange:t=>P(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Core (FW)",children:e.jsx("input",{type:"number",min:"0",value:Q,onChange:t=>le(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Flex (FW)",children:e.jsx("input",{type:"number",min:"0",value:Y,onChange:t=>ne(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"Fix (FW)",children:e.jsx("input",{type:"number",min:"0",value:W,onChange:t=>ie(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"ENI",children:e.jsx("input",{type:"number",min:"0",value:K,onChange:t=>oe(t.target.value),className:"border rounded-md px-2 py-1 text-sm"})}),e.jsx(n,{label:"% FW minima",children:e.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:B,onChange:t=>ce(t.target.value),className:"border rounded-md px-2 py-1 text-sm",placeholder:"es. 20"})})]})]}),f&&e.jsx("div",{className:"text-xs text-red-600",children:f})]}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsxs("thead",{className:"bg-gray-50 text-gray-700",children:[e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 py-1",rowSpan:2,children:"Agente"}),e.jsx("th",{className:"text-center px-2 py-1",colSpan:4,children:"Fissi"}),e.jsx("th",{className:"text-center px-2 py-1",colSpan:6,children:"Mobili"}),e.jsx("th",{className:"text-center px-2 py-1",colSpan:6,children:"Energy"}),e.jsx("th",{className:"px-2 py-1",rowSpan:2,children:"Note"}),e.jsx("th",{className:"px-2 py-1",rowSpan:2,children:"Ultima Modifica"})]}),e.jsxs("tr",{className:"bg-gray-100 text-xs text-gray-600",children:[e.jsx("th",{className:"text-right px-2 py-1",children:"Totali"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Start"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Pro"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Ultra"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Totali"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Start"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Pro"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Ultra"}),e.jsx("th",{className:"text-right px-2 py-1",children:"% RA"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Convergenze"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Totali"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Core"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Flex"}),e.jsx("th",{className:"text-right px-2 py-1",children:"Fix"}),e.jsx("th",{className:"text-right px-2 py-1",children:"ENI"}),e.jsx("th",{className:"text-right px-2 py-1",children:"% FW"})]})]}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:i?e.jsx("tr",{children:e.jsx("td",{className:"px-2 py-3 text-center text-gray-500",colSpan:17,children:"Caricamento…"})}):g&&g.length?g.map((t,I)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:t.Agente}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.FissoTotale??t.ObiettivoPDAFisso??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.FissoStart??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.FissoPro??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.FissoUltra??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.MobileTotale??t.ObiettivoPDAMobileRA??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.MobileStart??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.MobilePro??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.MobileUltra??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.MobilePercentRA!=null?Number(t.MobilePercentRA).toFixed(2)+"%":"0%"}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.MobileConvergenze??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.EnergyTotale??t.ObiettivoPDAEnergy??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.EnergyCore??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.EnergyFlex??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.EnergyFix??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.EnergyEni??0}),e.jsx("td",{className:"px-2 py-1 text-right",children:t.EnergyPercentFastweb!=null?Number(t.EnergyPercentFastweb).toFixed(2)+"%":"0%"}),e.jsx("td",{className:"px-2 py-1",children:t.Note||"-"}),e.jsx("td",{className:"px-2 py-1 whitespace-nowrap",children:t.DataUltimaModifica||"-"})]},I)):e.jsx("tr",{children:e.jsx("td",{className:"px-2 py-3 text-center text-gray-500",colSpan:19,children:"Nessun obiettivo per il periodo selezionato"})})})]})})]})}export{fe as default};
