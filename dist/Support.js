import{r as h,j as e}from"./vendor.js";import{D as g}from"./DashboardLayout.js";import{u as p}from"./useProdotti.js";import{u as f,D as j}from"./DynamicForm.js";import"./index.js";import"./logo2.js";function b({p:s,onClick:t}){return e.jsx("button",{onClick:()=>t?.(s),className:"group relative w-full text-left rounded-2xl bg-white hover:bg-gray-50 px-5 py-6 transition focus:outline-none focus:ring-2 focus:ring-blue-600/20 border border-gray-200",children:e.jsxs("div",{className:"flex flex-col items-center text-center gap-3",children:[e.jsx("div",{className:"text-3xl drop-shadow-sm h-8 flex items-center justify-center",children:s.image?e.jsx("img",{src:s.image,alt:s.title,className:"h-8 object-contain",loading:"lazy"}):e.jsx("span",{children:s.icon||"ðŸ› ï¸"})}),e.jsx("h4",{className:"text-sm font-extrabold uppercase tracking-tight text-blue-700 group-hover:text-blue-800",children:s.title}),e.jsx("p",{className:"text-xs text-gray-600 min-h-[32px]",children:s.description||s.desc}),e.jsx("div",{className:"mt-1 inline-flex items-center gap-1 rounded-full bg-gray-100 px-2.5 py-1",children:e.jsxs("span",{className:"text-[11px] font-semibold text-gray-700",children:[(s.price??s.credits)||0," Crediti"]})})]})})}function z(){const{data:s=[],loading:t,error:l,refetch:c}=p("ASS",10),[r,o]=h.useState(null),{data:n,loading:d,error:x}=f(r?.id),m=a=>{o(a)},i=()=>o(null);return e.jsxs(g,{title:"Assistenza",children:[e.jsxs("div",{className:"rounded-2xl bg-white p-6 sm:p-8 shadow-sm h-[calc(100vh-160px)] mt-4 overflow-y-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Prodotti Assistenza"})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[t&&[...Array(8)].map((a,u)=>e.jsx("div",{className:"h-36 bg-gray-100 rounded-2xl animate-pulse"},`sk-${u}`)),l&&e.jsxs("div",{className:"col-span-full text-sm text-red-600 flex items-center justify-between",children:[e.jsx("span",{children:"Errore nel caricamento prodotti assistenza."}),e.jsx("button",{onClick:c,className:"ml-3 px-3 py-1.5 rounded bg-gray-100 hover:bg-gray-200 text-gray-700",children:"Riprova"})]}),!t&&!l&&s.map(a=>e.jsx(b,{p:a,onClick:m},a.id)),!t&&!l&&s.length===0&&e.jsx("div",{className:"col-span-full text-sm text-gray-500",children:"Nessun prodotto assistenza disponibile"})]})]}),r&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/40",onClick:i}),e.jsxs("div",{className:"relative z-10 w-[95vw] max-w-3xl max-h-[90vh] overflow-auto rounded-2xl bg-white p-5 shadow-xl",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r.title}),e.jsxs("p",{className:"text-xs text-gray-500",children:["ID Offerta: ",r.id]})]}),e.jsx("button",{onClick:i,className:"rounded-md px-2 py-1 text-gray-600 hover:bg-gray-100",children:"Chiudi"})]}),d&&e.jsx("div",{className:"text-sm text-gray-600",children:"Caricamento moduloâ€¦"}),x&&e.jsx("div",{className:"text-sm text-red-600",children:"Errore nel caricamento del modulo."}),n&&e.jsx(j,{template:n,idOfferta:r.id,onSuccess:()=>{i()},onError:()=>{}})]})]})]})}export{z as default};
