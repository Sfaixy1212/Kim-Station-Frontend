import{r as t,j as e,Z as m,W as b,D as d,ab as u,ac as x,ad as p}from"./vendor.js";import{D as f}from"./DashboardLayout.js";import{g as y}from"./index.js";import{R as v,a as h}from"./RecentOrders.js";import"./logo2.js";function N(){const[o,l]=t.useState(null),[n,a]=t.useState(!0);t.useEffect(()=>{c()},[]);const c=async()=>{try{a(!0);const r=await y("/agente/ultime-attivazioni-agente"),s={fissi:0,mobili:0,energy:0,eni:0,sky:0,totale:0};Array.isArray(r)&&(r.forEach(i=>{s.fissi+=Number(i["FW FISSI"]||i.FWFissi||i.fw_fissi||0),s.mobili+=Number(i["FW MOBILI"]||i.FWMobili||i.fw_mobili||0),s.energy+=Number(i["FW ENERGY"]||i.FWEnergy||i.fw_energy||0),s.eni+=Number(i.ENI||i.eni||0),s.sky+=Number(i.SKY||i.sky||0)}),s.totale=s.fissi+s.mobili+s.energy+s.eni+s.sky),l(s)}catch(r){console.error("Errore caricamento KPI:",r)}finally{a(!1)}};if(n)return e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mb-6",children:[...Array(6)].map((r,s)=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-12"})]},s))});if(!o)return null;const g=[{label:"Attivazioni mese",value:o.totale,icon:m,color:"text-orange-600",bgColor:"bg-orange-50"},{label:"FASTWEB FISSI",value:o.fissi,icon:b,color:"text-blue-600",bgColor:"bg-blue-50"},{label:"FASTWEB MOBILI",value:o.mobili,icon:d,color:"text-purple-600",bgColor:"bg-purple-50"},{label:"FASTWEB ENERGY",value:o.energy,icon:u,color:"text-green-600",bgColor:"bg-green-50"},{label:"SKY",value:o.sky,icon:x,color:"text-indigo-600",bgColor:"bg-indigo-50"},{label:"ENI PLENITUDE",value:o.eni,icon:p,color:"text-emerald-600",bgColor:"bg-emerald-50"}];return e.jsx("div",{className:"relative z-10 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 mb-6",children:g.map((r,s)=>{const i=r.icon;return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-600 uppercase tracking-wide",children:r.label}),e.jsx("div",{className:`${r.bgColor} p-1.5 rounded-lg`,children:e.jsx(i,{className:`w-4 h-4 ${r.color}`})})]}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:r.value})]},s)})})}function A(){return e.jsx(f,{title:"Attivazioni",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"relative z-10 bg-gray-50 -mx-4 px-4 py-4 sm:mx-0 sm:px-0",children:e.jsx(N,{})}),e.jsx(v,{}),e.jsx(h,{})]})})}export{A as default};
