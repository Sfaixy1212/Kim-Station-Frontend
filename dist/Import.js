import{r as n,j as e,z as s}from"./vendor.js";import{C as h}from"./Card.js";import{a as b,p as f}from"./index.js";import{A as j}from"./Topbar.js";function F(){const[a,i]=n.useState("energia");return e.jsxs(e.Fragment,{children:[e.jsx(j,{}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Import Dati"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Gestione import FW Energia, RA, TLC giornaliero, FISSI e popolamento tipo daily"})]}),e.jsx("div",{className:"mb-6 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("nav",{className:"-mb-px flex gap-4 flex-wrap",children:[e.jsx("button",{onClick:()=>i("energia"),className:`py-2 px-4 text-sm font-medium border-b-2 transition-colors ${a==="energia"?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"FW Energia"}),e.jsx("button",{onClick:()=>i("ra"),className:`py-2 px-4 text-sm font-medium border-b-2 transition-colors ${a==="ra"?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Import RA"}),e.jsx("button",{onClick:()=>i("tlc"),className:`py-2 px-4 text-sm font-medium border-b-2 transition-colors ${a==="tlc"?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"TLC Giornaliero"}),e.jsx("button",{onClick:()=>i("fisso"),className:`py-2 px-4 text-sm font-medium border-b-2 transition-colors ${a==="fisso"?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Update FISSI"}),e.jsx("button",{onClick:()=>i("popola"),className:`py-2 px-4 text-sm font-medium border-b-2 transition-colors ${a==="popola"?"border-red-600 text-red-600 dark:text-red-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}`,children:"Popola Tipo Daily"})]})}),a==="energia"&&e.jsx(v,{}),a==="ra"&&e.jsx(N,{}),a==="tlc"&&e.jsx(k,{}),a==="fisso"&&e.jsx(I,{}),a==="popola"&&e.jsx(w,{})]})]})}function v(){const[a,i]=n.useState(null),[t,d]=n.useState(""),[r,c]=n.useState(!1),[l,m]=n.useState(null),x=async()=>{if(!a){s.error("Seleziona un file (.xlsx/.xls/.csv)");return}if(!t){s.error("Seleziona la Data validit√† (Batch)");return}c(!0),m(null);const o=s.loading("Import in corso‚Ä¶");try{const p=new FormData;p.append("file",a),p.append("batchDate",t);const g=await b("/admin/imports/fw-energia/commit",p);m(g),s.success(`Import completato: ${g?.inserted||0} inseriti`)}catch(p){console.error("[FW IMPORT][ERR]",p),s.error(p?.message||"Errore durante import")}finally{s.dismiss(o),c(!1)}};return e.jsxs(h,{title:"Import FW Energia",subtitle:"Carica il file giornaliero (.xlsx/.xls/.csv) e imposta la Data validit√† (Batch)",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"File (.xlsx/.xls/.csv)"}),e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:o=>i(o.target.files?.[0]||null),className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-3 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900 dark:file:text-blue-300"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Il file √® incrementale: importeremo tutte le righe in append."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Data validit√† (Batch)"}),e.jsx("input",{type:"date",value:t,onChange:o=>d(o.target.value),className:"w-full border border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200 rounded px-3 py-2 text-sm"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Esempio: 2025-09-13"})]})]}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:r,onClick:x,className:`px-4 py-2 rounded-md text-white text-sm ${r?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:r?"Elaborazione‚Ä¶":"Importa"}),e.jsx("button",{type:"button",disabled:r,onClick:()=>{i(null),d(""),m(null)},className:"px-3 py-2 text-sm rounded-md bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300",children:"Reset"})]}),l&&e.jsxs("div",{className:"mt-3 text-xs text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{children:["Inseriti: ",e.jsx("span",{className:"font-semibold",children:l.inserted??0})]}),l.updated!==void 0&&e.jsxs("div",{children:["Aggiornati: ",e.jsx("span",{className:"font-semibold",children:l.updated??0})]})]})]})}function N(){const[a,i]=n.useState(null),[t,d]=n.useState(!1),[r,c]=n.useState(null),l=async()=>{if(!a){s.error("Seleziona un file (.xlsx/.xls)");return}d(!0),c(null);const m=s.loading("Import RA in corso‚Ä¶ Questo pu√≤ richiedere alcuni minuti.");try{const x=new FormData;x.append("file",a);const o=await b("/admin/imports/inseritofw/commit",x);c(o),o.success?(s.success(`Import RA completato! ${o.rows_imported||0} righe importate`),Array.isArray(o?.columns_missing)&&o.columns_missing.length&&s(`${o.columns_missing.length} colonne mancanti nel file (ignorate)`,{icon:"‚ö†Ô∏è"})):s.error(`Import fallito: ${o.error||"Errore sconosciuto"}`)}catch(x){console.error("[IMPORT RA][ERR]",x),s.error(x?.message||"Errore durante import RA")}finally{s.dismiss(m),d(!1)}};return e.jsxs(h,{title:"Import RA (Mobile)",subtitle:"Carica file TLC Mobile RA (.xlsx/.xls). Aggiorna colonne Mobile in InseritoFW tramite staging CartelStaging.",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"File (.xlsx/.xls)"}),e.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:m=>i(m.target.files?.[0]||null),className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-3 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900 dark:file:text-blue-300"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Colonne richieste: usim pay type, stato post mobile, customer no, ecc. Le colonne mancanti vengono ignorate."})]})}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:t,onClick:l,className:`px-4 py-2 rounded-md text-white text-sm ${t?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:t?"Elaborazione‚Ä¶":"Importa"}),e.jsx("button",{type:"button",disabled:t,onClick:()=>{i(null),c(null)},className:"px-3 py-2 text-sm rounded-md bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300",children:"Reset"})]}),r&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:r.success?e.jsxs("div",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"‚úì"}),e.jsx("span",{className:"font-semibold",children:"Importazione completata con successo"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:["File: ",e.jsx("span",{className:"font-semibold",children:r.file||"‚Äî"})]}),e.jsxs("div",{children:["Righe importate: ",e.jsx("span",{className:"font-semibold",children:r.rows_imported??0})]}),e.jsxs("div",{children:["Colonne trovate: ",e.jsx("span",{className:"font-semibold",children:r.columns_found?.length??0})]}),e.jsxs("div",{children:["Timestamp: ",e.jsx("span",{className:"font-semibold",children:r.timestamp?new Date(r.timestamp).toLocaleString("it-IT"):"‚Äî"})]})]}),Array.isArray(r.columns_missing)&&r.columns_missing.length>0&&e.jsxs("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded",children:[e.jsx("div",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"‚ö†Ô∏è Colonne mancanti (ignorate):"}),e.jsx("div",{className:"text-xs mt-1 text-yellow-700 dark:text-yellow-400",children:r.columns_missing.join(", ")})]})]}):e.jsxs("div",{className:"space-y-2 text-sm text-red-700 dark:text-red-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‚úó"}),e.jsx("span",{className:"font-semibold",children:"Errore durante importazione"})]}),e.jsx("div",{className:"text-xs",children:r.error||"Errore sconosciuto"})]})})]})}function k(){const[a,i]=n.useState(null),[t,d]=n.useState(!1),[r,c]=n.useState(null),[l,m]=n.useState(null),x=async()=>{if(!a){s.error("Seleziona un file (.xlsx)");return}d(!0),c(null);const p=s.loading("Import TLC (INSERITO KIM) in corso‚Ä¶ Questo pu√≤ richiedere alcuni minuti.");try{const g=new FormData;g.append("file",a);const u=await b("/admin/imports/inseritofw-full/commit",g);if(c(u),u.success){const y=u.removed_sheets?.length>0?` ‚Ä¢ Fogli rimossi: ${u.removed_sheets.join(", ")}`:"";s.success(`Import completato! File: ${u.file||"‚Äî"}${y}`)}else s.error(`Import fallito: ${u.error||"Errore sconosciuto"}`)}catch(g){console.error("[IMPORT INSERITOFW FULL][ERR]",g),s.error(g?.message||"Errore durante import TLC")}finally{s.dismiss(p),d(!1)}},o=async()=>{if(!a){s.error("Seleziona un file (.xlsx)");return}d(!0),m(null);const p=s.loading("Lettura intestazioni (INSERITO KIM)‚Ä¶");try{const g=new FormData;g.append("file",a);const u=await b("/admin/imports/inseritofw-full/inspect-upload",g);m(u),s.success(`Sheet: ${u?.sheet||"‚Äî"} ‚Ä¢ ${u?.headers?.length??0} colonne`)}catch(g){console.error("[INSPECT INSERITOFW FULL][ERR]",g),s.error(g?.message||"Errore durante inspect")}finally{s.dismiss(p),d(!1)}};return e.jsxs(h,{title:"Import TLC giornaliero (INSERITO KIM)",subtitle:"Carica il file Excel. I fogli PIVOT, INCASSI, COMSY e PIANI verranno rimossi automaticamente prima dell'import.",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"File (.xlsx)"}),e.jsx("input",{type:"file",accept:".xlsx",onChange:p=>i(p.target.files?.[0]||null),className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-3 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900 dark:file:text-blue-300"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"L'importer .NET processer√† il file e inserir√† i dati nel database."})]})}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:t,onClick:o,className:`px-4 py-2 rounded-md text-white text-sm ${t?"bg-gray-400":"bg-emerald-600 hover:bg-emerald-700"}`,children:t?"Lettura‚Ä¶":"Inspect intestazioni"}),e.jsx("button",{type:"button",disabled:t,onClick:x,className:`px-4 py-2 rounded-md text-white text-sm ${t?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:t?"Elaborazione‚Ä¶":"Importa"}),e.jsx("button",{type:"button",disabled:t,onClick:()=>{i(null),c(null),m(null)},className:"px-3 py-2 text-sm rounded-md bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300",children:"Reset"})]}),l&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700 text-xs text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"font-semibold mb-1",children:["Intestazioni (",l.headers?.length??0,")"]}),e.jsx("div",{className:"overflow-auto whitespace-pre-wrap break-words",children:JSON.stringify(l.headers||[],null,2)}),Array.isArray(l.preview)&&l.preview.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"font-semibold mt-3 mb-1",children:["Anteprima prime ",l.previewCount," righe"]}),e.jsx("div",{className:"overflow-auto whitespace-pre-wrap break-words",children:JSON.stringify(l.preview,null,2)})]})]}),r&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:r.success?e.jsxs("div",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"‚úì"}),e.jsx("span",{className:"font-semibold",children:"Importazione completata con successo"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:["File: ",e.jsx("span",{className:"font-semibold",children:r.file||"‚Äî"})]}),e.jsxs("div",{children:["Timestamp: ",e.jsx("span",{className:"font-semibold",children:r.timestamp?new Date(r.timestamp).toLocaleString("it-IT"):"‚Äî"})]}),r.removed_sheets&&r.removed_sheets.length>0&&e.jsxs("div",{className:"col-span-2",children:["Fogli rimossi: ",e.jsx("span",{className:"font-semibold",children:r.removed_sheets.join(", ")})]})]}),r.importer_output&&e.jsx("div",{className:"mt-3 p-2 bg-white dark:bg-gray-900 rounded text-xs font-mono whitespace-pre-wrap",children:r.importer_output})]}):e.jsxs("div",{className:"space-y-2 text-sm text-red-700 dark:text-red-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‚úó"}),e.jsx("span",{className:"font-semibold",children:"Errore durante importazione"})]}),e.jsx("div",{className:"text-xs",children:r.error||"Errore sconosciuto"})]})})]})}function I(){const[a,i]=n.useState(null),[t,d]=n.useState(!1),[r,c]=n.useState(null),l=async()=>{if(!a){s.error("Seleziona un file (.xlsx/.xls)");return}d(!0),c(null);const m=s.loading("Update FISSI in corso‚Ä¶");try{const x=new FormData;x.append("file",a);const o=await b("/admin/imports/fisso/commit",x);c(o),o.success?s.success(`Update FISSI completato! ${o.rows_imported||0} righe importate`):s.error(`Update fallito: ${o.error||"Errore sconosciuto"}`)}catch(x){console.error("[IMPORT FISSO][ERR]",x),s.error(x?.message||"Errore durante update FISSI")}finally{s.dismiss(m),d(!1)}};return e.jsxs(h,{title:"Update FISSI (Offer Group)",subtitle:"Carica file Excel con colonne: customer no, customer first ord offer group. Aggiorna InseritoFW tramite staging CartelStagingOfferGroup.",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"File (.xlsx/.xls)"}),e.jsx("input",{type:"file",accept:".xlsx,.xls",onChange:m=>i(m.target.files?.[0]||null),className:"block w-full text-sm text-gray-700 dark:text-gray-300 file:mr-4 file:py-2 file:px-3 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 dark:file:bg-blue-900 dark:file:text-blue-300"}),e.jsx("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Solo 2 colonne richieste: customer no (chiave) e customer first ord offer group (valore)."})]})}),e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:t,onClick:l,className:`px-4 py-2 rounded-md text-white text-sm ${t?"bg-gray-400":"bg-blue-600 hover:bg-blue-700"}`,children:t?"Elaborazione‚Ä¶":"Importa"}),e.jsx("button",{type:"button",disabled:t,onClick:()=>{i(null),c(null)},className:"px-3 py-2 text-sm rounded-md bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300",children:"Reset"})]}),r&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-700",children:r.success?e.jsxs("div",{className:"space-y-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400",children:"‚úì"}),e.jsx("span",{className:"font-semibold",children:"Update completato con successo"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:["File: ",e.jsx("span",{className:"font-semibold",children:r.file||"‚Äî"})]}),e.jsxs("div",{children:["Righe importate: ",e.jsx("span",{className:"font-semibold",children:r.rows_imported??0})]}),e.jsxs("div",{children:["Staging table: ",e.jsx("span",{className:"font-semibold",children:r.staging_table||"‚Äî"})]}),e.jsxs("div",{children:["Timestamp: ",e.jsx("span",{className:"font-semibold",children:r.timestamp?new Date(r.timestamp).toLocaleString("it-IT"):"‚Äî"})]})]}),r.columns&&e.jsxs("div",{className:"mt-2 p-2 bg-blue-50 dark:bg-blue-900/20 rounded",children:[e.jsx("div",{className:"font-medium text-blue-800 dark:text-blue-300",children:"üìã Colonne processate:"}),e.jsx("div",{className:"text-xs mt-1 text-blue-700 dark:text-blue-400",children:r.columns.join(", ")})]})]}):e.jsxs("div",{className:"space-y-2 text-sm text-red-700 dark:text-red-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"‚úó"}),e.jsx("span",{className:"font-semibold",children:"Errore durante update"})]}),e.jsx("div",{className:"text-xs",children:r.error||"Errore sconosciuto"})]})})]})}function w(){const[a,i]=n.useState(!1),[t,d]=n.useState(null),r=async()=>{i(!0),d(null);const c=s.loading("Esecuzione stored procedure in corso‚Ä¶");try{const l=await f("/admin/imports/popola-tipo-daily",{});d(l),l.success?s.success(`Stored procedure completata! Batch: ${l.batchDate} (${l.duration})`):s.error(`Errore: ${l.error||"Errore sconosciuto"}`)}catch(l){console.error("[POPOLA-TIPO-DAILY][ERR]",l),s.error(l?.message||"Errore durante esecuzione stored procedure"),d({success:!1,error:l?.message||"Errore sconosciuto"})}finally{s.dismiss(c),i(!1)}};return e.jsx(h,{title:"Popola Tipo Daily",subtitle:"Esegue la stored procedure sp_popola_tipo_daily con l'ultima data Batch presente in InseritoFW",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-blue-600 dark:text-blue-400 text-xl",children:"‚ÑπÔ∏è"}),e.jsxs("div",{className:"flex-1 text-sm text-blue-800 dark:text-blue-300",children:[e.jsx("div",{className:"font-semibold mb-1",children:"Cosa fa questo comando?"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-xs",children:[e.jsxs("li",{children:["Trova automaticamente l'ultima data in ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"InseritoFW.Batch"})]}),e.jsxs("li",{children:["Esegue ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"EXEC dbo.sp_popola_tipo_daily @BatchDate = '[ultima_data]'"})]}),e.jsxs("li",{children:["Popola la colonna ",e.jsx("strong",{children:"Tipo"})," in ",e.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"InseritoFW"})," (solo righe NULL)"]}),e.jsx("li",{children:"Aggiorna la cache compensi agenti per il mese del Batch"})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",disabled:a,onClick:r,className:`px-6 py-3 rounded-md text-white text-sm font-medium ${a?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700 shadow-sm hover:shadow-md transition-all"}`,children:a?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Esecuzione in corso‚Ä¶"]}):"‚ñ∂Ô∏è Esegui Stored Procedure"}),t&&e.jsx("button",{type:"button",disabled:a,onClick:()=>d(null),className:"px-4 py-3 text-sm rounded-md bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300",children:"Reset"})]}),t&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:t.success?e.jsxs("div",{className:"space-y-3 text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"‚úÖ"}),e.jsx("span",{className:"font-semibold text-lg",children:"Stored Procedure Completata"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs bg-white dark:bg-gray-900 p-3 rounded",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Batch Date"}),e.jsx("div",{className:"font-semibold text-base",children:t.batchDate||"‚Äî"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:"Durata"}),e.jsx("div",{className:"font-semibold text-base",children:t.duration||"‚Äî"})]})]}),t.message&&e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:e.jsx("div",{className:"text-xs text-green-800 dark:text-green-300",children:t.message})})]}):e.jsxs("div",{className:"space-y-2 text-sm text-red-700 dark:text-red-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"‚ùå"}),e.jsx("span",{className:"font-semibold text-lg",children:"Errore"})]}),e.jsx("div",{className:"text-xs bg-red-50 dark:bg-red-900/20 p-3 rounded border border-red-200 dark:border-red-800",children:t.error||"Errore sconosciuto"}),t.details&&e.jsxs("details",{className:"text-xs",children:[e.jsx("summary",{className:"cursor-pointer font-medium",children:"Dettagli tecnici"}),e.jsx("pre",{className:"mt-2 p-2 bg-gray-100 dark:bg-gray-900 rounded overflow-x-auto",children:t.details})]})]})})]})})}export{F as default};
