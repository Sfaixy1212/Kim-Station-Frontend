const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["LoginForm.js","vendor.js","vendor.css","logo2.js","CreateUser.js","Topbar.js","Import.js","Card.js","GestioneOfferte.js","DealerTrend.js","Topbar2.js","AnalisiPage.js","Analisi.js","DashboardLayout.js","Geolocalizzazione.js","Reports.js","Compensi.js","CompensiDealer.js","Strumenti.js","PianiIncentivazione.js","rateizzazioni.js","PianiIncentiviModulare.js","AttivitaBackend.js","StatsCard.js","AnalisiFw.js","AnalisiSky.js","AdminDashboard.js","ForgotPassword.js","ResetPassword.js","DealerDashboard.js","RecentOrders.js","SuperMasterDashboard.js","Incentivi.js","AgentDashboard.js","AgendaFAB.js","MasterDashboard.js","MasterProdottiDashboard.js","CompensiAgenti.js","CompensiDealer2.js","Plafond.js","Contratti.js","Docs.js","pdfjs.js","Activations.js","DynamicForm.js","Products.js","ProductCard.js","useProdotti.js","Products2.js","Activations2.js","Upload.js","Support.js","ObiettiviCompensi.js","Reportistica.js","ReportisticaV3.js","Agenda.js","CRMVisite.js"])))=>i.map(i=>d[i]);
import{n as M,r as i,j as e,B as oe,F as se,u as ne,R as ae,a as o,N as R,c as ie}from"./vendor.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))h(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&h(d)}).observe(document,{childList:!0,subtree:!0});function s(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(l){if(l.ep)return;l.ep=!0;const c=s(l);fetch(l.href,c)}})();const le="modulepreload",ce=function(t){return"/"+t},J={},u=function(r,s,h){let l=Promise.resolve();if(s&&s.length>0){let E=function(m){return Promise.all(m.map(f=>Promise.resolve(f).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),_=d?.nonce||d?.getAttribute("nonce");l=E(s.map(m=>{if(m=ce(m),m in J)return;J[m]=!0;const f=m.endsWith(".css"),y=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${y}`))return;const g=document.createElement("link");if(g.rel=f?"stylesheet":le,f||(g.as="script"),g.crossOrigin="",g.href=m,_&&g.setAttribute("nonce",_),document.head.appendChild(g),f)return new Promise((z,a)=>{g.addEventListener("load",z),g.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${m}`)))})}))}function c(d){const _=new Event("vite:preloadError",{cancelable:!0});if(_.payload=d,window.dispatchEvent(_),!_.defaultPrevented)throw d}return l.then(d=>{for(const _ of d||[])_.status==="rejected"&&c(_.reason);return r().catch(c)})},x={DEALER:"dealer",MASTER:"master",MASTER_PRODOTTI:"master_prodotti",AGENTE:"agente",SUPER_MASTER:"super_master",ADMIN:"admin"},ue={[x.DEALER]:["view_dealer_dashboard","manage_own_clients","view_own_reports","edit_own_profile"],[x.MASTER]:["view_master_dashboard","manage_dealers","view_dealer_reports","manage_own_clients","view_analytics"],[x.MASTER_PRODOTTI]:["view_products_dashboard","manage_products","view_product_analytics","manage_inventory","set_pricing"],[x.AGENTE]:["view_agent_dashboard","manage_leads","view_commission","contact_clients"],[x.SUPER_MASTER]:["view_super_dashboard","manage_all_users","view_all_reports","manage_masters","system_settings","financial_overview"],[x.ADMIN]:["view_admin_dashboard","full_system_access","manage_all_users","system_configuration","security_settings","audit_logs"]},q={[x.ADMIN]:6,[x.SUPER_MASTER]:5,[x.MASTER]:4,[x.MASTER_PRODOTTI]:3,[x.DEALER]:2,[x.AGENTE]:1},de=(t,r)=>ue[t]?.includes(r)||!1,me=(t,r)=>q[t]>=q[r],S="/api",G=String(void 0).toLowerCase()==="true";if(G)try{console.warn("[AUTH] USE_MOCK attivo: il login accetta solo credenziali mock")}catch{}function A(){try{return typeof window<"u"&&window.top!==window.self?window.sessionStorage:window.localStorage}catch{return window.localStorage}}const T=()=>{try{return A().getItem("token")}catch{return null}},I=()=>{try{A().removeItem("token")}catch{}},H=t=>{try{A().setItem("token",t)}catch{}};function C(t){try{if(t===401){try{M.dismiss(),M.error("Sessione scaduta. Effettua di nuovo il login.")}catch{}I();try{localStorage.removeItem("token_incentivi"),localStorage.removeItem("token_base_cache")}catch{}typeof window<"u"&&(window.location.href="/login")}if(t===403){try{M.dismiss(),M.error("Accesso non autorizzato. Accedi con un profilo abilitato.")}catch{}typeof window<"u"&&(window.location.href="/unauthorized")}}catch{}}async function w(t,r={}){const s=T(),h={headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`},...r.headers},...r},l=`${S}${t}`,c=await fetch(l,h);if(!c.ok){const d=c.status;let _="";try{_=await c.text()}catch{}if(d===401||d===403){if(C(d),d===401)throw new Error("Sessione scaduta. Effettua di nuovo il login.");if(d===403)throw new Error("Permesso negato. Accedi con un profilo autorizzato.")}throw new Error("Si è verificato un errore. Riprova più tardi.")}return await c.json()}async function pe(t,r){try{if(G){if(console.log("Attempting mock login with:",{email:t,password:r}),t==="dealer@test.com"&&r==="password"){const l={token:"mock-jwt-token-dealer-12345",user:{id:1,email:"dealer@test.com",name:"Mario Rossi",role:"dealer",credit:0,permissions:["view_dashboard","manage_orders","view_activations"]}};return H(l.token),console.log("Mock login successful:",l),l}throw new Error("Credenziali non valide. Usa: dealer@test.com / password")}const s=await fetch(`${S}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,password:r})});if(!s.ok)throw s.status===401||s.status===400?new Error("Credenziali non valide. Verifica email e password."):new Error(`Errore ${s.status} durante il login`);const h=await s.json();if(!h?.token)throw new Error("Token mancante nella risposta");return H(h.token),h}catch(s){throw console.error("Login error:",s),s}}async function he(){I();try{const t=A();t.removeItem("token_incentivi"),t.removeItem("token_base_cache")}catch{}if(!(G||!S))try{await w("/logout",{method:"POST"})}catch(t){console.error("Logout error:",t)}}async function Ze(t){try{return await w(t)}catch(r){throw r.message.includes("401")&&(I(),window.location.href="/login"),r}}async function et(t,r){try{return await w(t,{method:"POST",body:JSON.stringify(r)})}catch(s){throw s.message.includes("401")&&(I(),window.location.href="/login"),s}}async function tt(t,r){try{return await w(t,{method:"PUT",body:JSON.stringify(r)})}catch(s){throw s.message.includes("401")&&(I(),window.location.href="/login"),s}}async function rt(t,r){try{return await w(t,{method:"PATCH",body:JSON.stringify(r)})}catch(s){throw s.message.includes("401")&&(I(),window.location.href="/login"),s}}async function ot(t,r){try{return await w(t,{method:"DELETE",body:r?JSON.stringify(r):void 0})}catch(s){throw s.message.includes("401")&&(I(),window.location.href="/login"),s}}async function st(t={}){const r=new URLSearchParams;t.scope&&r.set("scope",t.scope),Number.isInteger(t.year)&&r.set("year",String(t.year)),Number.isInteger(t.month)&&r.set("month",String(t.month));const s=r.toString();return await w(`/supermaster/fastweb/quality-ranking${s?`?${s}`:""}`)}async function nt(t={}){const r=new URLSearchParams;t.scope&&r.set("scope",t.scope),Number.isInteger(t.year)&&r.set("year",String(t.year)),Number.isInteger(t.month)&&r.set("month",String(t.month));const s=r.toString();return await w(`/supermaster/sky/quality-ranking${s?`?${s}`:""}`)}async function at(t={}){const r=new URLSearchParams;t.scope&&r.set("scope",t.scope),Number.isInteger(t.monthsBack)&&r.set("monthsBack",String(t.monthsBack));const s=r.toString();return await w(`/supermaster/sky/trend${s?`?${s}`:""}`)}async function it(t,r){const s=T(),h=s?{Authorization:`Bearer ${s}`}:{},l=`${S}${t}`,c=await fetch(l,{method:"POST",headers:h,body:r});if(!c.ok){const d=c.status;let _="";try{_=await c.text()}catch{}if(d===401||d===403){if(C(d),d===401)throw new Error("Sessione scaduta. Effettua di nuovo il login.");if(d===403)throw new Error("Accesso non autorizzato. Accedi con un profilo abilitato.")}throw new Error("Si è verificato un errore durante il caricamento. Riprova.")}return await c.json()}function _e(){return!!T()}async function lt(t,r={}){const s=T(),h={...r,headers:{Accept:"application/pdf,application/octet-stream,*/*",...r.headers||{},...s?{Authorization:`Bearer ${s}`}:{}}},l=`${S}${t}`,c=await fetch(l,h);if(!c.ok){const d=c.status;try{await c.text()}catch{}if(d===401||d===403){if(C(d),d===401)throw new Error("Sessione scaduta. Effettua di nuovo il login.");if(d===403)throw new Error("Accesso non autorizzato. Accedi con un profilo abilitato.")}throw new Error("Si è verificato un errore. Riprova più tardi.")}return await c.blob()}const ct=()=>{try{return A().getItem("token_incentivi")}catch{return null}},ut=t=>{try{A().setItem("token_incentivi",t)}catch{}},dt=()=>{try{A().removeItem("token_incentivi")}catch{}},mt=()=>{try{return A().getItem("token_base_cache")}catch{return null}},pt=t=>{try{A().setItem("token_base_cache",t||"")}catch{}};async function ht(t){return await w("/auth/totp/verify",{method:"POST",body:JSON.stringify({code:t})})}async function _t(){return await w("/mfa/totp/enroll",{method:"POST"})}async function ft(t){return await w("/mfa/totp/verify-enrollment",{method:"POST",body:JSON.stringify({code:t})})}async function gt(){try{return await w("/mfa/totp/status")}catch{return{enrolled:!1}}}async function xt(){return await w("/mfa/totp/reset",{method:"POST"})}async function wt(t){const r=`${S}/piani-incentivi`,s=await fetch(r,{headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}});if(!s.ok){const h=s.status;let l="";try{l=await s.text()}catch{}throw(h===401||h===403)&&C(h),new Error(`HTTP ${h} on ${r}${l?` -> ${l}`:""}`)}return await s.json()}async function jt(){return await w("/piani-incentivi")}const Z=i.createContext(),W=()=>{const t=i.useContext(Z);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},K=t=>{try{const r=t.split(".");if(r.length!==3)return null;const h=r[1].replace(/-/g,"+").replace(/_/g,"/"),l=h+"=".repeat((4-h.length%4)%4),c=atob(l);return JSON.parse(c)}catch(r){return console.error("JWT decode error",r),null}},fe=({children:t})=>{const[r,s]=i.useState(null),[h,l]=i.useState(!0),[c,d]=i.useState(null),_=(a,p)=>{if(!a)return null;p||(p=a.user||a.data?.user||a.account||a.profile||null);const j=p?.id??a.user_id??a.userId??a.dealerId??a.id??a.sub??null,v=p?.email??a.email??a.user_email??null,O=p?.name??a.name??([a.first_name,a.last_name].filter(Boolean).join(" ")||null);let P=a.role??p?.role??a.user_role??(Array.isArray(a.roles)?a.roles[0]:a.roles)??(Array.isArray(p?.roles)?p.roles[0]:p?.roles)??a.Ruolo??a.ruolo??p?.Ruolo??p?.ruolo??a.Ruoli??a.ruoli??p?.Ruoli??p?.ruoli??"dealer";Array.isArray(P)&&(P=P[0]);const N=(P?String(P):"dealer").toLowerCase(),b=a.permissions||p?.permissions||[],ee=p?.agentenome??a.agentenome??p?.AgenteNome??a.AgenteNome??p?.agenteNome??a.agenteNome??null,te=p?.dealerName??a.dealerName??p?.ragioneSociale??a.ragioneSociale??p?.RagioneSociale??a.RagioneSociale??null,re=p?.credit??a.credit,F=p?.idGruppo??a.idGruppo??a.IDGruppo??a.idgruppo??null;if(console.log("[DEBUG AuthContext] payload:",a),console.log("[DEBUG AuthContext] candidate:",p),console.log("[DEBUG AuthContext] idGruppo extracted:",F),!j)return null;const U={id:j,email:v,name:O,role:N,permissions:b,credit:re,agentenome:ee,dealerName:te,idGruppo:F};return console.log("[DEBUG AuthContext] Final user object:",U),console.log("[CRITICAL] idGruppo in user object:",U.idGruppo,new Date().toISOString()),U};i.useEffect(()=>{(async()=>{if(_e())try{const p=T();if(p==="mock-jwt-token-dealer-12345"){s({id:1,email:"dealer@test.com",name:"Mario Rossi",role:"dealer",permissions:["view_dashboard","manage_orders","view_activations"]}),l(!1);return}const j=K(p);if(!j){console.error("Token JWT non valido"),await m(),l(!1);return}const v=_(j,null);if(!v){console.error("Impossibile normalizzare utente dal token"),await m(),l(!1);return}s(v)}catch(p){console.error("Errore checkAuth:",p),await m(),l(!1);return}l(!1)})()},[]);const E=async(a,p)=>{try{d(null);let j,v;typeof a=="string"?(j=a,v=p):(j=a.email,v=a.password);const O=await pe(j,v);if(O?.token){const P=O.token,N=K(P),b=_(N,O.user);console.log("[DEBUG Login] Token payload:",N),console.log("[DEBUG Login] Normalized user:",b),b&&s(b)}return O}catch(j){const v=j?.message||"Errore durante il login. Riprova.";throw d(v),j}},m=async()=>{try{await he()}catch(a){console.error("Logout error:",a)}s(null),d(null),l(!1)},f=a=>r?de(r.role,a):!1,y=a=>r?me(r.role,a):!1,g=a=>r?.role===a,z={user:r,loading:h,error:c,setError:d,login:E,logout:m,checkPermission:f,checkRoleAccess:y,isRole:g,isAuthenticated:!!(r&&T()),isDealer:()=>g(x.DEALER),isMaster:()=>g(x.MASTER),isMasterProdotti:()=>g(x.MASTER_PRODOTTI),isAgente:()=>g(x.AGENTE),isSuperMaster:()=>g(x.SUPER_MASTER),isAdmin:()=>g(x.ADMIN)};return e.jsx(Z.Provider,{value:z,children:t})},ge=i.lazy(()=>u(()=>import("./LoginForm.js"),__vite__mapDeps([0,1,2,3]))),xe=i.lazy(()=>u(()=>import("./CreateUser.js"),__vite__mapDeps([4,1,2,5]))),we=i.lazy(()=>u(()=>import("./Import.js"),__vite__mapDeps([6,1,2,7,5]))),je=i.lazy(()=>u(()=>import("./GestioneOfferte.js"),__vite__mapDeps([8,1,2,5]))),Ee=i.lazy(()=>u(()=>import("./DealerTrend.js"),__vite__mapDeps([9,1,2,10,7]))),Re=i.lazy(()=>u(()=>import("./AnalisiPage.js"),__vite__mapDeps([11,1,2,10,12,13,3]))),ye=i.lazy(()=>u(()=>import("./Geolocalizzazione.js"),__vite__mapDeps([14,1,2,7,10])));i.lazy(()=>u(()=>import("./Reports.js"),__vite__mapDeps([15,1,2,7,10])));const ve=i.lazy(()=>u(()=>import("./Compensi.js"),__vite__mapDeps([16,1,2,10,7]))),Ae=i.lazy(()=>u(()=>import("./CompensiDealer.js"),__vite__mapDeps([17,1,2,10]))),Pe=i.lazy(()=>u(()=>import("./Strumenti.js"),__vite__mapDeps([18,1,2,10,7]))),Se=i.lazy(()=>u(()=>import("./PianiIncentivazione.js"),__vite__mapDeps([19,1,2,7,10,20]))),Te=i.lazy(()=>u(()=>import("./PianiIncentiviModulare.js"),__vite__mapDeps([21,1,2,10,20]))),Ie=i.lazy(()=>u(()=>import("./AttivitaBackend.js"),__vite__mapDeps([22,1,2,10,7,23]))),Oe=i.lazy(()=>u(()=>import("./AnalisiFw.js"),__vite__mapDeps([24,1,2,10,7]))),ze=i.lazy(()=>u(()=>import("./AnalisiSky.js"),__vite__mapDeps([25,1,2,10,7]))),be=i.lazy(()=>u(()=>import("./AdminDashboard.js"),__vite__mapDeps([26,1,2,7,5]))),De=i.lazy(()=>u(()=>import("./ForgotPassword.js"),__vite__mapDeps([27,1,2,7]))),Le=i.lazy(()=>u(()=>import("./ResetPassword.js"),__vite__mapDeps([28,1,2,7]))),Q=i.lazy(()=>u(()=>import("./DealerDashboard.js"),__vite__mapDeps([29,1,2,13,3,30]))),ke=i.lazy(()=>u(()=>import("./SuperMasterDashboard.js"),__vite__mapDeps([31,1,2,32,13,3,12,18,10,7,23]))),Ne=i.lazy(()=>u(()=>import("./AgentDashboard.js"),__vite__mapDeps([33,1,2,13,3,23,7,34]))),Y=i.lazy(()=>u(()=>import("./MasterDashboard.js"),__vite__mapDeps([35,1,2,13,3]))),Me=i.lazy(()=>u(()=>import("./MasterProdottiDashboard.js"),__vite__mapDeps([36,1,2,13,3]))),Ve=i.lazy(()=>u(()=>import("./CompensiAgenti.js"),__vite__mapDeps([37,1,2,13,3,7]))),Ce=i.lazy(()=>u(()=>import("./CompensiDealer2.js"),__vite__mapDeps([38,1,2,13,3]))),Ue=i.lazy(()=>u(()=>import("./Plafond.js"),__vite__mapDeps([39,1,2,13,3]))),$e=i.lazy(()=>u(()=>import("./Contratti.js"),__vite__mapDeps([40,1,2,13,3]))),D=i.lazy(()=>u(()=>import("./Docs.js"),__vite__mapDeps([41,1,2,42,13,3]))),V=i.lazy(()=>u(()=>import("./Activations.js"),__vite__mapDeps([43,1,2,13,3,44]))),$=i.lazy(()=>u(()=>import("./Products.js"),__vite__mapDeps([45,1,2,13,3,46,47]))),Be=i.lazy(()=>u(()=>import("./Products2.js"),__vite__mapDeps([48,1,2,13,3,46,47]))),Ge=i.lazy(()=>u(()=>import("./Activations2.js"),__vite__mapDeps([49,1,2,13,3,30]))),L=i.lazy(()=>u(()=>import("./Upload.js"),__vite__mapDeps([50,1,2,13,3]))),k=i.lazy(()=>u(()=>import("./Support.js"),__vite__mapDeps([51,1,2,13,3,47,44]))),We=i.lazy(()=>u(()=>import("./ObiettiviCompensi.js"),__vite__mapDeps([52,1,2,13,3]))),B=i.lazy(()=>u(()=>import("./Incentivi.js"),__vite__mapDeps([32,1,2,13,3]))),Fe=i.lazy(()=>u(()=>import("./Reportistica.js"),__vite__mapDeps([53,1,2,13,3]))),Je=i.lazy(()=>u(()=>import("./ReportisticaV3.js"),__vite__mapDeps([54,1,2,13,3]))),X=i.lazy(()=>u(()=>import("./Agenda.js"),__vite__mapDeps([55,1,2,13,3,34]))),qe=i.lazy(()=>u(()=>import("./CRMVisite.js"),__vite__mapDeps([56,1,2,10])));function n({children:t,allowedRoles:r=[]}){const{user:s,isAuthenticated:h}=W();if(console.log("ProtectedRoute - isAuthenticated:",h),console.log("ProtectedRoute - user:",s),console.log("ProtectedRoute - allowedRoles:",r),console.log("ProtectedRoute - user.role:",s?.role),!h||!T())return e.jsx(R,{to:"/login",replace:!0});const l=_=>(_||"").toString().trim().toLowerCase().replace(/[^a-z]/g,""),c=l(s?.role),d=r.map(_=>l(_));return console.log("ProtectedRoute - normalized role:",c,"normalized allowed:",d,"pathname:",window?.location?.pathname),c==="admin"||c==="superuser"?t:r.length>0&&!d.includes(c)?(console.log("Access denied - role not allowed"),e.jsx(R,{to:"/unauthorized",replace:!0})):t}function He(){const{logout:t}=W();return i.useEffect(()=>{t()},[]),e.jsx(R,{to:"/login",replace:!0})}function Ke(){const{isAuthenticated:t,loading:r,user:s,login:h,logout:l}=W(),c=ne(),d=E=>(E||"").toString().trim().toLowerCase().replace(/[^a-z]/g,""),_=E=>{const m=d(E);return c(m==="supermaster"?"/supermaster":m==="master"?"/master":m==="masterprodotti"?"/masterprodotti":m==="agente"||m==="agent"?"/agente":m==="admin"||m==="superuser"?"/admin":"/dealer")};return i.useEffect(()=>{try{window.parent&&window.parent!==window&&window.parent.postMessage({type:"IMPERSONATE_ACK"},window.location.origin)}catch{}const E=async m=>{try{if(!m||m.origin!==window.location.origin)return;const f=m.data||{};if(f.type==="IMPERSONATE_ACK"){try{window.__LOGIN_FORM_READY=!0}catch{}return}if(f.type==="IMPERSONATE_RESET"||f.type==="IMPERSONATE_LOGOUT"){await l(),c("/login");return}if(f.type==="IMPERSONATE_LOGIN"&&f.payload){if(typeof window<"u"&&window.__LOGIN_FORM_READY)return;const{email:y,password:g}=f.payload;if(!y||!g)return;await l();const z=await h(y,g);_(z?.role);return}}catch(f){console.error("[Impersonate] handler error",f)}};return window.addEventListener("message",E),()=>window.removeEventListener("message",E)},[]),r?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Caricamento..."})]})}):e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Caricamento..."})]})}),children:e.jsxs(ae,{children:[e.jsx(o,{path:"/login",element:t?(()=>{const m=(f=>(f||"").toString().trim().toLowerCase().replace(/[^a-z]/g,""))(s?.role);return m==="master"?e.jsx(R,{to:"/master",replace:!0}):m==="supermaster"?e.jsx(R,{to:"/supermaster",replace:!0}):m==="masterprodotti"?e.jsx(R,{to:"/masterprodotti",replace:!0}):m==="agente"||m==="agent"?e.jsx(R,{to:"/agente",replace:!0}):m==="admin"||m==="superuser"?e.jsx(R,{to:"/admin",replace:!0}):e.jsx(R,{to:"/dealer",replace:!0})})():e.jsx(ge,{})}),e.jsx(o,{path:"/forgot-password",element:e.jsx(De,{})}),e.jsx(o,{path:"/reset-password",element:e.jsx(Le,{})}),e.jsx(o,{path:"/logout",element:e.jsx(He,{})}),e.jsx(o,{path:"/dashboard",element:e.jsx(R,{to:"/dealer",replace:!0})}),e.jsx(o,{path:"/admin",element:e.jsx(n,{allowedRoles:["admin","superuser"],children:e.jsx(be,{})})}),e.jsx(o,{path:"/admin/imports",element:e.jsx(n,{allowedRoles:["admin","superuser"],children:e.jsx(we,{})})}),e.jsx(o,{path:"/admin/gestione-offerte",element:e.jsx(n,{allowedRoles:["admin","superuser"],children:e.jsx(je,{})})}),e.jsx(o,{path:"/dealer",element:e.jsx(n,{allowedRoles:["dealer"],children:e.jsx(Q,{})})}),e.jsx(o,{path:"/agente",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(Ne,{})})}),e.jsx(o,{path:"/agente/attivazioni",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(Ge,{})})}),e.jsx(o,{path:"/master",element:e.jsx(n,{allowedRoles:["master"],children:e.jsx(Y,{})})}),e.jsx(o,{path:"/master/contratti",element:e.jsx(n,{allowedRoles:["master"],children:e.jsx($e,{})})}),e.jsx(o,{path:"/masterprodotti",element:e.jsx(n,{allowedRoles:["masterprodotti"],children:e.jsx(Me,{})})}),e.jsx(o,{path:"/supermaster",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(ke,{})})}),e.jsx(o,{path:"/supermaster/strumenti",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(Pe,{})})}),e.jsx(o,{path:"/supermaster/geolocalizzazione",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(ye,{})})}),e.jsx(o,{path:"/supermaster/analisi",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(Re,{})})}),e.jsx(o,{path:"/supermaster/analisi-fw",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(Oe,{})})}),e.jsx(o,{path:"/supermaster/analisi-sky",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(ze,{})})}),e.jsx(o,{path:"/supermaster/compensi",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(ve,{})})}),e.jsx(o,{path:"/supermaster/compensi-dealer",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(Ae,{})})}),e.jsx(o,{path:"/supermaster/dealer-trend",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(Ee,{})})}),e.jsx(o,{path:"/supermaster/piani-incentivazione",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(Se,{})})}),e.jsx(o,{path:"/supermaster/piani-incentivi-modulare",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(Te,{})})}),e.jsx(o,{path:"/supermaster/attivita-backend",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(Ie,{})})}),e.jsx(o,{path:"/supermaster/crm-visite",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(qe,{})})}),e.jsx(o,{path:"/dealer/activations",element:e.jsx(n,{allowedRoles:["dealer"],children:e.jsx(V,{})})}),e.jsx(o,{path:"/agente/activations",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(V,{})})}),e.jsx(o,{path:"/master/activations",element:e.jsx(n,{allowedRoles:["master"],children:e.jsx(V,{})})}),e.jsx(o,{path:"/masterprodotti/compensi-agenti",element:e.jsx(n,{allowedRoles:["masterprodotti"],children:e.jsx(Ve,{})})}),e.jsx(o,{path:"/supermaster/activations",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(V,{})})}),e.jsx(o,{path:"/dealer/activations/:id",element:e.jsx(n,{allowedRoles:["dealer"],children:e.jsx(Q,{})})}),e.jsx(o,{path:"/master/activations/:id",element:e.jsx(n,{allowedRoles:["master"],children:e.jsx(Y,{})})}),e.jsx(o,{path:"/dealer/products",element:e.jsx(n,{allowedRoles:["dealer"],children:e.jsx($,{})})}),e.jsx(o,{path:"/agente/products",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(Be,{})})}),e.jsx(o,{path:"/master/products",element:e.jsx(n,{allowedRoles:["master"],children:e.jsx($,{})})}),e.jsx(o,{path:"/masterprodotti/compensi-dealer",element:e.jsx(n,{allowedRoles:["masterprodotti"],children:e.jsx(Ce,{})})}),e.jsx(o,{path:"/masterprodotti/plafond",element:e.jsx(n,{allowedRoles:["masterprodotti"],children:e.jsx(Ue,{})})}),e.jsx(o,{path:"/supermaster/products",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx($,{})})}),e.jsx(o,{path:"/dealer/upload",element:e.jsx(n,{allowedRoles:["dealer"],children:e.jsx(L,{})})}),e.jsx(o,{path:"/agente/upload",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(L,{})})}),e.jsx(o,{path:"/master/upload",element:e.jsx(n,{allowedRoles:["master"],children:e.jsx(L,{})})}),e.jsx(o,{path:"/masterprodotti/upload",element:e.jsx(n,{allowedRoles:["masterprodotti"],children:e.jsx(L,{})})}),e.jsx(o,{path:"/supermaster/upload",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(L,{})})}),e.jsx(o,{path:"/dealer/support",element:e.jsx(n,{allowedRoles:["dealer"],children:e.jsx(k,{})})}),e.jsx(o,{path:"/agente/support",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(k,{})})}),e.jsx(o,{path:"/agente/obiettivi-compensi",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(We,{})})}),e.jsx(o,{path:"/agente/reportistica",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(Fe,{})})}),e.jsx(o,{path:"/agente/reportistica-v3",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(Je,{})})}),e.jsx(o,{path:"/agente/agenda",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(X,{})})}),e.jsx(o,{path:"/agent/agenda",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(X,{})})}),e.jsx(o,{path:"/piani-incentivi",element:e.jsx(n,{allowedRoles:["dealer","agente","master","masterprodotti","supermaster"],children:e.jsx(B,{})})}),e.jsx(o,{path:"/dealer/incentives",element:e.jsx(n,{allowedRoles:["dealer"],children:e.jsx(B,{})})}),e.jsx(o,{path:"/dealer/incentivi",element:e.jsx(n,{allowedRoles:["dealer"],children:e.jsx(B,{})})}),e.jsx(o,{path:"/master/support",element:e.jsx(n,{allowedRoles:["master"],children:e.jsx(k,{})})}),e.jsx(o,{path:"/masterprodotti/support",element:e.jsx(n,{allowedRoles:["masterprodotti"],children:e.jsx(k,{})})}),e.jsx(o,{path:"/supermaster/support",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(k,{})})}),e.jsx(o,{path:"/dealer/docs",element:e.jsx(n,{allowedRoles:["dealer"],children:e.jsx(D,{})})}),e.jsx(o,{path:"/agente/docs",element:e.jsx(n,{allowedRoles:["agente","agent"],children:e.jsx(D,{})})}),e.jsx(o,{path:"/master/docs",element:e.jsx(n,{allowedRoles:["master"],children:e.jsx(D,{})})}),e.jsx(o,{path:"/masterprodotti/docs",element:e.jsx(n,{allowedRoles:["masterprodotti"],children:e.jsx(D,{})})}),e.jsx(o,{path:"/supermaster/docs",element:e.jsx(n,{allowedRoles:["supermaster"],children:e.jsx(D,{})})}),e.jsx(o,{path:"/admin/users/create",element:e.jsx(n,{allowedRoles:["admin","superuser","master","supermaster"],children:e.jsx(xe,{})})}),e.jsx(o,{path:"/",element:e.jsx(R,{to:"/login",replace:!0})}),e.jsx(o,{path:"/unauthorized",element:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Accesso Non Autorizzato"}),e.jsx("p",{className:"text-gray-600",children:"Non hai i permessi per accedere a questa pagina."})]})})}),e.jsx(o,{path:"*",element:e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Pagina Non Trovata"}),e.jsx("p",{className:"text-gray-600",children:"La pagina che stai cercando non esiste."})]})})})]})})}function Qe(){return e.jsx(oe,{children:e.jsxs(fe,{children:[e.jsx(se,{position:"top-right"}),e.jsx(Ke,{})]})})}function Ye(){"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("[PWA] Service Worker registrato:",t.scope),setInterval(()=>{t.update()},6e4)}).catch(t=>{console.error("[PWA] Registrazione Service Worker fallita:",t)})}),window.addEventListener("beforeinstallprompt",t=>{console.log("[PWA] App installabile - Evento catturato"),t.preventDefault(),console.log("[PWA] Per installare manualmente, apri DevTools > Application > Manifest > Install")}),window.addEventListener("appinstalled",()=>{console.log("[PWA] App installata con successo!")})}Ye();ie.createRoot(document.getElementById("root")).render(e.jsx(i.StrictMode,{children:e.jsx(Qe,{})}));export{it as a,tt as b,lt as c,w as d,st as e,nt as f,Ze as g,at as h,ot as i,T as j,rt as k,ct as l,mt as m,ut as n,wt as o,et as p,jt as q,dt as r,pt as s,gt as t,W as u,ht as v,xt as w,_t as x,ft as y};
